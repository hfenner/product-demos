apiVersion: org.eclipse.che/v2
kind: CheCluster
metadata:
  name: devspaces
  namespace: openshift-devspaces
  annotations:
    argocd.argoproj.io/sync-wave: "1"
spec:
  components:
    cheServer:
      debug: false
      logLevel: INFO
    dashboard: {}
    devWorkspace: {}
    pluginRegistry: {}
  devEnvironments:
    security:
      podSecurityContext:
        fsGroup: 1000
        fsGroupChangePolicy: OnRootMismatch
    {{- if semverCompare ">=1.33-0" .Capabilities.KubeVersion.Version }}
    containerRunConfiguration:
      openShiftSecurityContextConstraint: nested-container-runasany
      workspacesPodAnnotations:
        io.kubernetes.cri-o.Devices: /dev/fuse,/dev/net/tun
        io.openshift.podman-fuse: ""
    disableContainerRunCapabilities: false
    {{- end }}
    startTimeoutSeconds: 600
    storage:
      pvcStrategy: per-user
    defaultNamespace:
      autoProvision: true
  networking: {}
